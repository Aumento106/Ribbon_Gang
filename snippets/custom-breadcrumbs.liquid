{% comment %} {% assign breadCrumbArray = '' %}
 
{% for mainLink in linklists.main-menu.links %}
  {% if mainLink.current  %}
  {% assign link = mainLink.title | append: '||' | append: mainLink.url %}
  
    {% assign breadCrumbArray = breadCrumbArray | append: link %}
  
  {% endif %}
  {% for subLink in mainLink.links %}
    {% if subLink.current %}
    {% assign subLinkLink = subLink.title | append: '||' | append: subLink.url %}
   
      {% assign breadCrumbArray = breadCrumbArray | append: link | append: '>>' | append: subLinkLink %}
    {% endif %}
    {% for grandchildlink in subLink.links %}
      {% if grandchildlink.current %}
      {% assign grandchildlink = grandchildlink.title | append: '||' | append: grandchildlink.url %}
   
      {% assign breadCrumbArray = breadCrumbArray | append: link | append: '>>' | append: subLinkLink | append: '>>' | append: grandchildlink %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endfor %}

 
{% if breadCrumbArray != blank %}
  {% assign splitBread = breadCrumbArray | split: '>>' %}
  {% assign lastCollectionTitle = blank %}
  {% for breadCrumb in splitBread %}
    {{ breadCrumb }}
  {% endfor %}
{% endif %} {% endcomment %}

<nav class="breadcrumb">
  <a href="{{ shop.url }}">Home</a>
  {% assign separator = ' > ' %}

  {% comment %} Handle menu-based pages {% endcomment %}
  {% assign breadCrumbArray = '' %}
  {% for mainLink in linklists.main-menu.links %}
    {% if mainLink.current %}
      {% assign breadCrumbArray = mainLink.title %}
      {% for subLink in mainLink.links %}
        {% if subLink.current %}
          {% assign breadCrumbArray = breadCrumbArray | append: separator | append: subLink.title %}
          {% for grandchildLink in subLink.links %}
            {% if grandchildLink.current %}
              {% assign breadCrumbArray = breadCrumbArray | append: separator | append: grandchildLink.title %}
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endfor %}

  {% comment %} Fallbacks for pages not in menu {% endcomment %}
  {% if breadCrumbArray == blank %}
    {% if template contains 'page' %}
      {% assign breadCrumbArray = page.title %}
    {% elsif template contains 'product' %}
      {% if product.collections.size > 0 %}
        {% assign collection = product.collections.first %}
        {% assign breadCrumbArray = collection.title | append: separator | append: product.title %}
      {% else %}
        {% assign breadCrumbArray = product.title %}
      {% endif %}
    {% elsif template contains 'collection' %}
      {% assign breadCrumbArray = collection.title %}
    {% elsif template contains 'blog' %}
      {% assign breadCrumbArray = blog.title %}
    {% elsif template contains 'article' %}
      {% assign breadCrumbArray = blog.title | append: separator | append: article.title %}
    {% endif %}
  {% endif %}

  {% if breadCrumbArray != blank %}
    {{ separator }}{{ breadCrumbArray }}
  {% endif %}
</nav>
